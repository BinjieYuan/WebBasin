(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72bdd019"],{"0b42":function(e,a,r){var t=r("da84"),n=r("e8b5"),i=r("68ee"),o=r("861d"),s=r("b622"),l=s("species"),u=t.Array;e.exports=function(e){var a;return n(e)&&(a=e.constructor,i(a)&&(a===u||n(a.prototype))?a=void 0:o(a)&&(a=a[l],null===a&&(a=void 0))),void 0===a?u:a}},"154a":function(e,a,r){"use strict";r.r(a);var t=function(){var e=this,a=e.$createElement;e._self._c;return e._m(0)},n=[function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{staticClass:"home"},[r("div",{staticClass:"map",attrs:{id:"leafletMap"}})])}],i=(r("d81d"),r("e9c4"),{name:"BaseLayer",mounted:function(){this.initMap(),this.initController(),this.initLayers(),this.listenDraw()},data:function(){return{mapEl:null,baseLayers:null,drawingLayerGroup:null,riverLayer:null,riverCkb:!1,basinCkb:!0,basinType:"standard",levelSelect:7,levelSelectCustom:5,levelLayerList:[],basinLayer:null,wholeUpstreamLayer:null,lakesLayer:null,wholeBasinLayer:null,wholeBasinCkb:!1,wholeUpstreamCkb:!1,uploadCSVModal:!1,toUploadCSV:null,csvName:"",batchStatus:"csvUpload",basinRangesUrl:"",uploadGeoJSONModal:!1,lisfloodModal:!1,toUploadGeoJSON:null,geoJSONName:"",downloadDataModal:!1,levelSelectDownload:1,loadingDEM:!1,loadingDir:!1,loadingAcc:!1,loadingLake:!1,loadingBasin:!1,loadingSlope:!1,loadingRiver:!1,resetDataModal:!1,customDataModal:!1,showDownloadGeoJSONBtn:!1,toDownloadGeoJSONStr:"",querySwitch:!1,queryType:"standard",levelSelectQuery:5,paramData:{rainParam:"",startParamD:"",startParamT:"",endParamD:"",endParamT:""},resetData:{riverThreshold:100,lakeThreshold:1e3},resetValidate:{riverThreshold:[{required:!0,message:"The value cannot be empty",trigger:"blur"}],lakeThreshold:[{required:!0,message:"The value cannot be empty",trigger:"blur"}]},resetStatus:"resetSetting",resultDataUrl:"",customDataSetting:{demFileName:"",lakeZipName:"",riverThreshold:100},customValidate:{demFileName:[{required:!0,message:"The file is required",trigger:"blur"}],lakeZipName:[{required:!0,message:"The file is required",trigger:"blur"}],riverThreshold:[{required:!0,message:"The value cannot be empty",trigger:"blur"}],lakeThreshold:[{required:!0,message:"The value cannot be empty",trigger:"blur"}]},customStatus:"customSetting",customDataUrl:"",scrollOps:{bar:{background:"#808695"}}}},methods:{initMap:function(){this.mapEl=L.map("leafletMap",{zoom:5,center:[34,110],crs:L.CRS.TianDiTu_WGS84,timeDimension:!0,timeDimensionControl:!0})},initController:function(){this.drawingLayerGroup=L.layerGroup([]),this.drawingLayerGroup.addTo(this.mapEl)},initLayers:function(){var e=L.supermap.tiandituTileLayer({key:"56b0c218a6c4020cd38b5fc2be7c6202",layerType:"vec"}),a=L.supermap.tiandituTileLayer({key:"56b0c218a6c4020cd38b5fc2be7c6202",layerType:"vec",isLabel:!0}),r=L.supermap.tiandituTileLayer({key:"56b0c218a6c4020cd38b5fc2be7c6202",layerType:"img"}),t=L.supermap.tiandituTileLayer({key:"56b0c218a6c4020cd38b5fc2be7c6202",layerType:"img",isLabel:!0}),n=L.supermap.tiandituTileLayer({key:"56b0c218a6c4020cd38b5fc2be7c6202",layerType:"ter"}),i=L.supermap.tiandituTileLayer({key:"56b0c218a6c4020cd38b5fc2be7c6202",layerType:"ter",isLabel:!0}),o=L.layerGroup([e,a]),s=L.layerGroup([r,t]),l=L.layerGroup([n,i]);this.baseLayers={"矢量地图":o,"影像地图":s,"地形地图":l};var u={};L.control.layers(this.baseLayers,u).addTo(this.mapEl),this.baseLayers["矢量地图"].addTo(this.mapEl),this.baseLayers["矢量地图"].setZIndex(0),this.baseLayers["影像地图"].setZIndex(0),this.baseLayers["地形地图"].setZIndex(0),L.control.scale({position:"bottomleft"}).addTo(this.mapEl)},listenDraw:function(){var e=this,a=this;this.mapEl.on("pm:create",(function(e){a.showDownloadGeoJSONBtn=!1,a.drawingLayerGroup.clearLayers(),a.drawingLayerGroup.addLayer(e.layer)})),this.mapEl.on("pm:remove",(function(e){a.showDownloadGeoJSONBtn=!1,a.drawingLayerGroup.clearLayers()})),this.mapEl.on("click",(function(r){if(a.querySwitch){var t=r.latlng,n=t["lng"],i=t["lat"],o="";switch(a.queryType){case"standard":o="/basins/querySubLevel/"+e.levelSelect;break;case"upstream":o="/basins/upstream";break;case"whole":o="/basins/queryScope"}e.$Spin.show(),axios.get(o+"?lon="+n+"&lat="+i).then((function(e){if(0!=e.data){var r=e.data;a.showDownloadGeoJSONBtn=!0,a.toDownloadGeoJSONStr=r,a.addGeoJSONToMap(JSON.stringify(r),"red"),a.$Spin.hide()}else a.$Message.error("No Basin Info Here."),a.$Spin.hide()})).catch((function(e){confirm("Something Wrong!"),a.$Spin.hide()}))}}))}}}),o=i,s=(r("9ab6"),r("2877")),l=Object(s["a"])(o,t,n,!1,null,null,null);a["default"]=l.exports},"1dde":function(e,a,r){var t=r("d039"),n=r("b622"),i=r("2d00"),o=n("species");e.exports=function(e){return i>=51||!t((function(){var a=[],r=a.constructor={};return r[o]=function(){return{foo:1}},1!==a[e](Boolean).foo}))}},"65f0":function(e,a,r){var t=r("0b42");e.exports=function(e,a){return new(t(e))(0===a?0:a)}},"9ab6":function(e,a,r){"use strict";r("f74e")},b727:function(e,a,r){var t=r("0366"),n=r("e330"),i=r("44ad"),o=r("7b0b"),s=r("07fa"),l=r("65f0"),u=n([].push),c=function(e){var a=1==e,r=2==e,n=3==e,c=4==e,d=6==e,p=7==e,y=5==e||d;return function(f,h,m,b){for(var g,v,L=o(f),S=i(L),w=t(h,m),T=s(S),D=0,k=b||l,G=a?k(f,T):r||p?k(f,0):void 0;T>D;D++)if((y||D in S)&&(g=S[D],v=w(g,D,L),e))if(a)G[D]=v;else if(v)switch(e){case 3:return!0;case 5:return g;case 6:return D;case 2:u(G,g)}else switch(e){case 4:return!1;case 7:u(G,g)}return d?-1:n||c?c:G}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},d81d:function(e,a,r){"use strict";var t=r("23e7"),n=r("b727").map,i=r("1dde"),o=i("map");t({target:"Array",proto:!0,forced:!o},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(e,a,r){var t=r("c6b6");e.exports=Array.isArray||function(e){return"Array"==t(e)}},e9c4:function(e,a,r){var t=r("23e7"),n=r("da84"),i=r("d066"),o=r("2ba4"),s=r("e330"),l=r("d039"),u=n.Array,c=i("JSON","stringify"),d=s(/./.exec),p=s("".charAt),y=s("".charCodeAt),f=s("".replace),h=s(1..toString),m=/[\uD800-\uDFFF]/g,b=/^[\uD800-\uDBFF]$/,g=/^[\uDC00-\uDFFF]$/,v=function(e,a,r){var t=p(r,a-1),n=p(r,a+1);return d(b,e)&&!d(g,n)||d(g,e)&&!d(b,t)?"\\u"+h(y(e,0),16):e},L=l((function(){return'"\\udf06\\ud834"'!==c("\udf06\ud834")||'"\\udead"'!==c("\udead")}));c&&t({target:"JSON",stat:!0,forced:L},{stringify:function(e,a,r){for(var t=0,n=arguments.length,i=u(n);t<n;t++)i[t]=arguments[t];var s=o(c,null,i);return"string"==typeof s?f(s,m,v):s}})},f74e:function(e,a,r){}}]);
//# sourceMappingURL=chunk-72bdd019.aecee036.js.map